<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Assistant Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', 'Arial Unicode MS', 'Noto Sans', sans-serif;
            background: linear-gradient(135deg, #f0f4f8 0%, #e0e7ff 100%);
            background-image: url('https://www.transparenttextures.com/patterns/currency.png'); /* Subtle money pattern */
            background-blend-mode: overlay;
            background-size: cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            color: #1e293b;
            overflow-x: hidden;
            padding-top: 20px;
            position: relative;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            z-index: 1;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        header .header-content {
            text-align: center;
        }

        header .auth-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }

        header p {
            font-size: 1rem;
            color: #64748b;
            font-weight: 500;
        }

        .main-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 5px 15px;
            background: #3b82f6;
            color: #ffffff;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            z-index: 1;
        }

        .main-btn:hover {
            background: #2563eb;
            transform: translateY(-3px);
        }

        .main-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .main-btn i {
            font-size: 1rem;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            z-index: 1;
        }

        .card-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 15px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            text-align: left;
            width: 150px;
        }

        .card-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            background: #f1f5f9;
        }

        .card-btn i {
            font-size: 1.1rem;
        }

        .sections {
            width: 100%;
            max-width: 1200px;
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95); /* Slightly transparent white for readability */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            display: none;
            z-index: 1;
        }

        .section {
            padding: 0;
            animation: fadeIn 0.5s ease-in;
            display: none;
        }

        .section.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            font-size: 1rem;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
        }

        .result {
            margin-top: 20px;
            text-align: center;
            font-size: 1.1rem;
            color: #10b981;
            display: block;
        }

        .result.error {
            color: #dc2626;
        }

        .text-red-600 {
            color: #dc2626;
        }

        .text-green-600 {
            color: #10b981;
        }

        .conditions {
            margin-top: 15px;
            text-align: left;
            font-size: 0.9rem;
            color: #64748b;
            list-style-type: disc;
            padding-left: 20px;
            display: block;
        }

        .suggestions {
            margin-top: 15px;
            text-align: center;
            font-size: 0.9rem;
            color: #64748b;
            display: block;
            padding: 10px;
            background: #f9fafb;
            border-radius: 6px;
        }

        .error {
            margin-top: 10px;
            color: #dc2626;
            font-size: 0.9rem;
            text-align: center;
            display: block;
        }

        .tips-list {
            margin-top: 15px;
            list-style-type: disc;
            padding-left: 20px;
            color: #64748b;
        }

        .tips-list li {
            margin-bottom: 0.5rem;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .news-card {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            z-index: 1;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
        }

        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #f1f5f9;
        }

        .news-content {
            padding: 15px;
        }

        .news-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
            line-height: 1.3;
        }

        .news-title a {
            color: #3b82f6;
            text-decoration: none;
        }

        .news-title a:hover {
            text-decoration: underline;
        }

        .news-time {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 10px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            z-index: 1;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #savings-progress .w-full {
            margin-top: 10px;
        }

        .news-controls {
            margin-bottom: 20px;
        }

        .news-controls select {
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #d1d5db;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Financial Assistant Hub</h1>
            <p>Your Personal Loan & Credit Assistant</p>
        </div>
        <div class="auth-buttons">
            {% if not session.get('user_id') %}
                <a href="{{ url_for('signup') }}" class="main-btn"><i class="fas fa-user-plus"></i> Sign Up</a>
                <a href="{{ url_for('login') }}" class="main-btn"><i class="fas fa-sign-in-alt"></i> Login</a>
            {% else %}
                <a href="{{ url_for('logout') }}" class="main-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
            {% endif %}
        </div>
    </header>

    <div class="buttons">
        <button class="card-btn" onclick="toggleSection('loan-prediction')"><i class="fas fa-chart-line"></i> Loan Prediction</button>
        <button class="card-btn" onclick="toggleSection('loan-calculator')"><i class="fas fa-calculator"></i> Loan Calculator</button>
        <button class="card-btn" onclick="toggleSection('credit-calculator')"><i class="fas fa-calculator"></i> Credit Score Calculator</button>
        <button class="card-btn" onclick="toggleSection('savings-tracker')"><i class="fas fa-piggy-bank"></i> Savings Tracker</button>
        <button class="card-btn" onclick="toggleSection('financial-news')"><i class="fas fa-newspaper"></i> Financial News</button>
    </div>

    <a href="/dashboard" class="main-btn"><i class="fas fa-eye"></i> View Prediction Dashboard</a>

    <div class="sections">
        <div id="loan-prediction" class="section">
            <form id="loan-prediction-form" method="POST">
                <div class="form-group">
                    <label for="person_age">Age</label>
                    <input type="number" name="person_age" id="person_age" placeholder="Age" required>
                </div>
                <div class="form-group">
                    <label for="person_income">Annual Income</label>
                    <input type="number" name="person_income" id="person_income" placeholder="Income" required oninput="validateLoanAmount()">
                </div>
                <div class="form-group">
                    <label for="person_emp_exp">Employment Experience (Years)</label>
                    <input type="number" name="person_emp_exp" id="person_emp_exp" placeholder="Experience" required>
                </div>
                <div class="form-group">
                    <label for="loan_amnt">Loan Amount</label>
                    <input type="number" name="loan_amnt" id="loan_amnt" placeholder="Loan Amount" required>
                    <div id="loan-amount-error" class="error">Loan amount cannot exceed annual income.</div>
                </div>
                <div class="form-group">
                    <label for="loan_int_rate">Interest Rate (%)</label>
                    <input type="number" name="loan_int_rate" id="loan_int_rate" placeholder="Interest Rate" step="0.1" required>
                </div>
                <div class="form-group">
                    <label for="credit_score">Credit Score</label>
                    <input type="number" name="credit_score" id="credit_score" placeholder="Credit Score" required oninput="validateCreditScore()">
                    <div id="credit-score-error" class="error">Credit score must be between 300 and 850.</div>
                </div>
                <div class="form-group">
                    <label for="previous_loan_defaults">Previous Loan Defaults</label>
                    <select name="previous_loan_defaults" id="previous_loan_defaults" required>
                        <option value="No">No</option>
                        <option value="Yes">Yes</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="person_gender">Gender</label>
                    <select name="person_gender" id="person_gender" required>
                        <option value="Female">Female</option>
                        <option value="Male">Male</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="person_education">Education</label>
                    <select name="person_education" id="person_education" required>
                        <option value="High School">High School</option>
                        <option value="Bachelor">Bachelor</option>
                        <option value="Master">Master</option>
                        <option value="Doctorate">Doctorate</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="person_home_ownership">Home Ownership</label>
                    <select name="person_home_ownership" id="person_home_ownership" required>
                        <option value="Own">Own</option>
                        <option value="Rent">Rent</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="loan_intent">Loan Intent</label>
                    <select name="loan_intent" id="loan_intent" required>
                        <option value="Personal">Personal</option>
                        <option value="Education">Education</option>
                        <option value="Medical">Medical</option>
                        <option value="HomeImprovement">HomeImprovement</option>
                        <option value="Venture">Venture</option>
                    </select>
                </div>
                <input type="submit" value="Predict" id="loan-predict-btn" class="main-btn">
            </form>
            <div class="result"></div>
            <div class="conditions"></div>
            <div class="suggestions" id="loan-suggestions"></div>
            <div class="tips-list" id="credit-tips-list"></div>
        </div>

        <div id="loan-calculator" class="section">
            <form onsubmit="calculateLoan(); return false;">
                <div class="form-group">
                    <label for="loan_amount">Loan Amount</label>
                    <input type="number" id="loan_amount" placeholder="Loan Amount" required>
                </div>
                <div class="form-group">
                    <label for="interest_rate">Interest Rate (%)</label>
                    <input type="number" id="interest_rate" placeholder="Interest Rate" step="0.1" required>
                </div>
                <div class="form-group">
                    <label for="loan_term">Loan Term (Months)</label>
                    <input type="number" id="loan_term" placeholder="Loan Term" required>
                </div>
                <input type="submit" value="Calculate" class="main-btn">
                <div id="loan-result" class="result"></div>
            </form>
        </div>

        <div id="credit-calculator" class="section">
            <form onsubmit="calculateCreditScore(event); return false;">
                <div class="form-group">
                    <label for="payment_history">Payment History (0-100% on-time)</label>
                    <input type="number" id="payment_history" min="0" max="100" placeholder="e.g., 90" required>
                </div>
                <div class="form-group">
                    <label for="credit_utilization">Credit Utilization (0-100%)</label>
                    <input type="number" id="credit_utilization" min="0" max="100" placeholder="e.g., 30" required>
                </div>
                <div class="form-group">
                    <label for="credit_length">Length of Credit History (years)</label>
                    <input type="number" id="credit_length" min="0" placeholder="e.g., 5" required>
                </div>
                <div class="form-group">
                    <label for="new_credit">New Credit Inquiries (number in last 12 months)</label>
                    <input type="number" id="new_credit" min="0" placeholder="e.g., 2" required>
                </div>
                <div class="form-group">
                    <label for="credit_mix">Credit Mix (0-100% variety)</label>
                    <input type="number" id="credit_mix" min="0" max="100" placeholder="e.g., 50" required>
                </div>
                <input type="submit" value="Calculate Score" class="main-btn">
                <div id="credit-result" class="result"></div>
            </form>
        </div>

        <div id="savings-tracker" class="section">
            <h2>Savings Goal Tracker</h2>
            <form onsubmit="updateSavingsProgress(event)">
                <div class="form-group">
                    <label for="savings_goal">Savings Goal</label>
                    <input type="number" id="savings_goal" placeholder="e.g., 5000" required>
                </div>
                <div class="form-group">
                    <label for="monthly_savings">Monthly Contribution</label>
                    <input type="number" id="monthly_savings" placeholder="e.g., 200" required>
                </div>
                <input type="submit" value="Update Progress" class="main-btn">
            </form>
            <div id="savings-progress" class="result mt-4">
                <p>Progress: <span id="progress-percent">0%</span></p>
                <div class="w-full bg-gray-200 rounded-full h-4">
                    <div id="progress-bar" class="bg-green-600 h-4 rounded-full" style="width: 0%"></div>
                </div>
                <p>Total Saved: Rs.<span id="total-saved">0</span></p>
            </div>
        </div>

        <div id="financial-news" class="section">
            <h2>Financial News</h2>
            <div class="news-controls">
                <label for="news-limit">Number of Articles:</label>
                <select id="news-limit" onchange="fetchNews()">
                    <option value="5">5</option>
                    <option value="10">10</option>
                    <option value="15">15</option>
                    <option value="20">20</option>
                </select>
            </div>
            <div class="news-grid" id="news-feed"></div>
            <div class="spinner" id="news-loading"></div>
        </div>
    </div>

    <script>
        function toggleSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            const sectionsContainer = document.querySelector('.sections');
            
            sections.forEach(section => section.classList.remove('active'));
            const selectedSection = document.getElementById(sectionId);
            selectedSection.classList.add('active');
            sectionsContainer.style.display = 'block';

            if (sectionId === 'financial-news') {
                fetchNews();
            }
        }

        function validateCreditScore() {
            const creditScoreInput = document.getElementById('credit_score');
            const errorDiv = document.getElementById('credit-score-error');
            const submitBtn = document.getElementById('loan-predict-btn');
            const creditScore = parseInt(creditScoreInput.value) || 0;

            if (creditScore < 300 || creditScore > 850) {
                errorDiv.style.display = 'block';
                submitBtn.disabled = true;
            } else {
                errorDiv.style.display = 'none';
                submitBtn.disabled = false;
            }
        }

        function validateLoanAmount() {
            const incomeInput = document.getElementById('person_income');
            const loanAmountInput = document.getElementById('loan_amnt');
            const errorDiv = document.getElementById('loan-amount-error');
            const submitBtn = document.getElementById('loan-predict-btn');
            const income = parseInt(incomeInput.value) || 0;
            const loanAmount = parseInt(loanAmountInput.value) || 0;

            if (loanAmount > income) {
                errorDiv.style.display = 'block';
                submitBtn.disabled = true;
            } else {
                errorDiv.style.display = 'none';
                submitBtn.disabled = false;
            }
        }

        function calculateLoan() {
            const loanAmount = parseFloat(document.getElementById('loan_amount').value) || 0;
            const interestRate = parseFloat(document.getElementById('interest_rate').value) / 100 || 0;
            const loanTerm = parseInt(document.getElementById('loan_term').value) || 0;
            const resultDiv = document.getElementById('loan-result');

            if (loanAmount <= 0 || interestRate < 0 || loanTerm <= 0) {
                resultDiv.innerHTML = 'Please enter valid values.';
                resultDiv.classList.add('error');
                resultDiv.style.display = 'block';
                return;
            }

            const monthlyInterest = interestRate / 12;
            const monthlyPayment = (loanAmount * monthlyInterest) / (1 - Math.pow(1 + monthlyInterest, -loanTerm));
            resultDiv.innerHTML = `Monthly Payment: Rs.${monthlyPayment.toFixed(2)}`;
            resultDiv.classList.remove('error');
            resultDiv.style.display = 'block';
        }

        function calculateCreditScore(event) {
            event.preventDefault();
            const paymentHistory = parseInt(document.getElementById('payment_history').value) || 0;
            const creditUtilization = parseInt(document.getElementById('credit_utilization').value) || 0;
            const creditLength = parseInt(document.getElementById('credit_length').value) || 0;
            const newCredit = parseInt(document.getElementById('new_credit').value) || 0;
            const creditMix = parseInt(document.getElementById('credit_mix').value) || 0;
            const resultDiv = document.getElementById('credit-result');

            if (paymentHistory > 100 || creditUtilization > 100 || creditMix > 100 || paymentHistory < 0 || creditUtilization < 0 || creditMix < 0 || creditLength < 0 || newCredit < 0) {
                resultDiv.innerHTML = 'Please enter valid values (0-100% for percentages, non-negative for others).';
                resultDiv.classList.add('error');
                resultDiv.style.display = 'block';
                return;
            }

            const score = (
                (paymentHistory * 0.35) + 
                ((100 - creditUtilization) * 0.30) + 
                (creditLength * 5) + 
                ((5 - newCredit) * 10) + 
                (creditMix * 0.10)
            ) * 8.5;

            const finalScore = Math.max(300, Math.min(850, score));
            resultDiv.innerHTML = `Estimated Credit Score: ${finalScore.toFixed(0)}`;
            resultDiv.classList.remove('error');
            resultDiv.style.display = 'block';
        }

        function updateSavingsProgress(event) {
            event.preventDefault();
            const goal = parseFloat(document.getElementById('savings_goal').value) || 0;
            const monthly = parseFloat(document.getElementById('monthly_savings').value) || 0;
            let totalSaved = parseFloat(localStorage.getItem('totalSaved')) || 0;
            totalSaved += monthly;
            localStorage.setItem('totalSaved', totalSaved);
            const progress = Math.min((totalSaved / goal) * 100, 100);
            document.getElementById('progress-percent').textContent = progress.toFixed(2) + '%';
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('total-saved').textContent = totalSaved.toFixed(2);
            if (progress >= 100) alert('Goal achieved! Congratulations!');
        }

        document.getElementById('loan-prediction-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const submitBtn = this.querySelector('input[type="submit"]');
            const spinner = document.createElement('div');
            spinner.className = 'spinner';
            submitBtn.parentNode.appendChild(spinner);
            submitBtn.disabled = true;
            submitBtn.value = 'Processing...';

            const formData = new FormData(this);
            const income = parseInt(document.getElementById('person_income').value) || 0;
            const loanAmount = parseInt(document.getElementById('loan_amnt').value) || 0;

            fetch('/predict', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (!response.ok) throw new Error('Network response was not ok ' + response.status);
                return response.json();
            })
            .then(data => {
                const resultDiv = document.querySelector('#loan-prediction .result');
                const conditionsDiv = document.querySelector('#loan-prediction .conditions');
                const suggestionsDiv = document.getElementById('loan-suggestions');
                const tipsDiv = document.getElementById('credit-tips-list');

                if (data.error) {
                    resultDiv.innerHTML = `<p class="error">${data.error}</p>`;
                } else {
                    resultDiv.innerHTML = `<p>Prediction: <span class="${data.prediction === 'Approved' ? 'text-green-600' : 'text-red-600'}">${data.prediction}</span></p>`;
                    conditionsDiv.innerHTML = data.major_conditions.length > 0 ? '<ul>' + data.major_conditions.map(condition => `<li>${condition}</li>`).join('') + '</ul>' : '<p>No major conditions to display.</p>';
                    
                    if (data.prediction === 'Rejected' && loanAmount > income * 0.3) {
                        const suggestedAmount = Math.floor(income * 0.3);
                        suggestionsDiv.innerHTML = `Suggestion: Based on your income and considering other factors, we can offer you a loan up to Rs.${suggestedAmount}.`;
                    } else {
                        suggestionsDiv.innerHTML = '';
                    }

                    const uniqueTips = [...new Set(data.credit_tips)];
                    tipsDiv.innerHTML = uniqueTips.length > 0 ? '<h3>Credit Improvement Tips:</h3><ul>' + uniqueTips.map(tip => `<li>${tip}</li>`).join('') + '</ul>' : '<p>No improvement tips available.</p>';
                }
            })
            .catch(error => {
                document.querySelector('#loan-prediction .result').innerHTML = `<p class="error">An error occurred: ${error.message}</p>`;
            })
            .finally(() => {
                submitBtn.value = 'Predict';
                submitBtn.disabled = false;
                spinner.remove();
            });

            toggleSection('loan-prediction');
        });

        document.getElementById('loan-prediction-form').addEventListener('submit', function(event) {
            const creditScoreInput = document.getElementById('credit_score');
            const creditScore = parseInt(creditScoreInput.value) || 0;
            if (creditScore < 300 || creditScore > 850) {
                event.preventDefault();
                document.getElementById('credit-score-error').style.display = 'block';
            }
            const incomeInput = document.getElementById('person_income');
            const loanAmountInput = document.getElementById('loan_amnt');
            const income = parseInt(incomeInput.value) || 0;
            const loanAmount = parseInt(loanAmountInput.value) || 0;
            if (loanAmount > income) {
                event.preventDefault();
                document.getElementById('loan-amount-error').style.display = 'block';
            }
        });

        function fetchNews() {
            const newsFeed = document.getElementById('news-feed');
            const newsLoading = document.getElementById('news-loading');
            const limit = document.getElementById('news-limit').value;
            newsLoading.style.display = 'block';
            newsFeed.innerHTML = '';

            fetch(`/news?limit=${limit}`)
                .then(response => {
                    if (!response.ok) {
                        console.error('Fetch error:', response.status, response.statusText);
                        throw new Error(`Network response was not ok ${response.status}: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    console.log('Fetched data:', data);
                    newsLoading.style.display = 'none';
                    if (data.error) {
                        newsFeed.innerHTML = `<p class="error">${data.error}</p>`;
                    } else if (data.articles && data.articles.length > 0) {
                        newsFeed.innerHTML = data.articles.map(article => `
                            <div class="news-card">
                                <img src="${article.urlToImage || 'https://via.placeholder.com/300x200?text=No+Image'}" alt="${article.title}" class="news-image">
                                <div class="news-content">
                                    <div class="news-title"><a href="${article.url}" target="_blank">${article.title}</a></div>
                                    <div class="news-time">${new Date(article.publishedAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) + ' ' + new Date(article.publishedAt).toLocaleDateString()}</div>
                                </div>
                            </div>
                        `).join('');
                    } else {
                        newsFeed.innerHTML = '<p>No financial news articles available at this time.</p>';
                    }
                })
                .catch(error => {
                    console.error('Error in fetchNews:', error);
                    newsLoading.style.display = 'none';
                    newsFeed.innerHTML = `<p class="error">Error loading news: ${error.message}</p>`;
                });
        }

        document.addEventListener('DOMContentLoaded', () => {
            toggleSection('financial-news');
            setInterval(fetchNews, 300000);
        });
    </script>
</body>
</html>
